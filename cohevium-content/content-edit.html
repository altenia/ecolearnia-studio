<div class="row full-width">
    <div class="columns small-12" >

        

        <div id="content-editor"></div>

        <div id="editor">function foo(items) {
            var x = "All this is syntax highlighted";
            return x;
        }</div>
    </div>

</div>


<script src="/cohevium/public/foundation/js/foundation/foundation.tab.js"></script>
<script src='/cohevium/public/js/app.bundle.js'></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.9/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.getSession().setMode("ace/mode/javascript");

    var Router = require('ampersand-router');

    var ContentService = require('content-service').ContentService;
    var ContentEditorView = require('contenteditor-view').ContentEditorView;

    var contentService = new ContentService({rootUrl: 'http://localhost:9099'});

    // @todo - Populate the breadcrumb

    var ContentEditorRouter = Router.extend({
        routes: {
            '': 'home',
            'item/:uuid': 'item',
            'node/:uuid': 'node',
        },

        home: function() {
            console.log('home');
        },

        item: function(uuid) {
            console.log(uuid);
            contentService.fetchItem(uuid)
                    .done(function(data){
                        var contentEditorEl = document.getElementById('content-editor');
                        var contentEditorView = new ContentEditorView({model: data, el:contentEditorEl});
                        contentEditorView.render();
                        console.log('model:', data.toJSON());
                    });
        },

        node: function(uuid) {
            console.log(uuid);
            contentService.fetchNode(uuid)
                    .done(function(data){
                        var contentEditorEl = document.getElementById('content-editor');
                        var contentEditorView = new ContentEditorView({model: data, el:contentEditorEl});
                        contentEditorView.render();
                        console.log('model:', data.toJSON());
                    });
        }
    });

    var router = new ContentEditorRouter();
    var t = router.history.start({pushState: false});
</script>
